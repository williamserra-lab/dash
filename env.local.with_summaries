# =====================================================
# NEXTIA — .env.local (organizado)
# Objetivo: bater o olho e entender o que está ativo
# =====================================================

# =====================================================
# 0) CONTROLE RÁPIDO (o que importa no dia-a-dia)
# =====================================================

# Base da aplicação
NEXTIA_INTERNAL_BASE_URL=http://localhost:3000

# Banco (PostgreSql contém credenciais)
NEXTIA_DB_URL=postgresql://evolution:evolution@localhost:5432/evolution

# Tenant atendido por ESTA instância do WhatsApp (DEIXAR APENAS 1)
EVOLUTION_TENANT_CLIENT_ID=nextia

# Evolution (envio/instância)
EVOLUTION_BASE_URL=http://localhost:8080
EVOLUTION_INSTANCE=NextIA
EVOLUTION_APIKEY=128495D3-9EE4-4239-8ACE-22F66FD15C2A

# Secret usado pelo webhook (trocar depois em produção)
EVOLUTION_WEBHOOK_SECRET=JoseaneGostosa

# Outbox (Evolution WhatsApp)
OUTBOX_DRY_RUN=false
OUTBOX_SEND_IMMEDIATE=true

# Campanhas / Grupos
# Opção A: Campanha em grupo (OUTBOUND) sem conversa em grupo (INBOUND ignorado)
# - OUTBOUND para @g.us continua funcionando
# - INBOUND de @g.us NÃO será processado pelo bot
NEXTIA_IGNORE_GROUP_MESSAGES=true

# =====================================================
# 1) ADMIN (acesso e testes)
# =====================================================

# Admin Key (OBRIGATÓRIO agora para /api/admin/* e /admin-login)
NEXTIA_ADMIN_KEY=eutenhocasa0708

# Admin (LEGADO - Basic Auth) — só mantenha se o código ainda usa
NEXTIA_ADMIN_USER=nextia_admin
NEXTIA_ADMIN_PASS=Serra@0708
NEXTIA_ADMIN_REALM=Nextia Admin

# =====================================================
# 2) LLM (provider, modelos e timeout)
# =====================================================

# Timeout global
NEXTIA_LLM_TIMEOUT_MS=120000

# Provider ativo (escolha 1):
# NEXTIA_LLM_PROVIDER=ollama
NEXTIA_LLM_PROVIDER=groq
# NEXTIA_LLM_PROVIDER=openai
# NEXTIA_LLM_PROVIDER=gemini

# ---- Ollama (local, sem custo)
# OLLAMA_BASE_URL=http://localhost:11434
# OLLAMA_MODEL=phi3:mini

# ---- Groq (OpenAI-compatible)
GROQ_API_KEY=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
GROQ_MODEL=llama-3.1-8b-instant
GROQ_BASE_URL=https://api.groq.com/openai/v1

# ---- OpenAI
# OPENAI_API_KEY=<MANTER_SEU_VALOR_ATUAL>

# ---- Gemini
# GEMINI_API_KEY=<MANTER_SEU_VALOR_ATUAL>
# GEMINI_MODEL=gemini-1.5-flash

# =====================================================
# 3) MULTI-TENANT (referência)
# =====================================================
# Se você alternar o WhatsApp para outro cliente, troque APENAS:
# EVOLUTION_TENANT_CLIENT_ID=catia_foods

# =====================================================
# 4) BACKFILL / RECONCILIAÇÃO
# =====================================================
NEXTIA_BACKFILL_LIMIT=50

# =====================================================
# 5) MASTER KEY (opcional por enquanto)
# =====================================================
# Usada para criptografar/decriptografar access keys pagas por cliente (AES-256-GCM).
# NEXTIA_MASTER_KEY=

# =====================================================
# LLM — Governança de tokens (por clientId)
# =====================================================

# limite mensal default (tokens) se o clientId não tiver override em llm_budgets.json
NEXTIA_LLM_MONTHLY_TOKEN_LIMIT=250000

# comportamento padrão quando estoura:
# degrade = atendimento degrada (sua escolha)
# block   = bloqueia chamada (útil para jobs/campanhas/rotinas)
NEXTIA_LLM_OVER_LIMIT_MODE=degrade
NEXTIA_FEATURE_CHAT_SUMMARY=1
NEXTIA_FEATURE_FILE_SUMMARY=1
NEXTIA_PDF_SUMMARY_MAXCHARS=60000
NEXTIA_CHAT_SUMMARY_MAXCHARS=40000
